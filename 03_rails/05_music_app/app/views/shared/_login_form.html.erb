<% register ||= false %>
<% action_url = register ? users_url : session_url %>
<% submit_text = register ? "Register" : "Login" %>
<% email = register ? user.email : nil %>
 
<form action="<%= action_url %>" method="POST">
  <%= token_tag %>

  <div class="form-input">
    <label for="email">Email</label>
    <input type="email" name="user[email]" value="<%= email %>" id="email">
    <%= error(:email) %>
  </div>

  <div class="form-input">
    <label for="password">Password</label>
    <input type="password" name="user[password]" id="password">
    <%= error(:password) %>
  </div>

  <div class="form-input">
    <input type="submit" value="<%= submit_text %>">
    <%= error(:invalid_auth) %>
  </div>
</form>
